<!-- Paso 1: Selección de tipo de usuario -->
<div class="content-body" *ngIf="currentStep === 1 && !userType">
    <div class="welcome-area bg-image">
      <div class="welcome-inner">
        <div class="dz-media">
          <img src="../assets/images/onboarding/pic1.png" alt="">
        </div>
        
        <swiper-container 
        [slidesPerView]="swiperConfig.slidesPerView"
        [spaceBetween]="swiperConfig.spaceBetween"
        [pagination]="swiperConfig.pagination"
        class="get-started"
      >
        <swiper-slide>
          <div class="slide-info">
            <div class="started">
              <h2 class="title mb-3">OnGo</h2>
              <p>Sal y disfruta de la vida nocturna</p>
            </div>
          </div>
        </swiper-slide>
        <!-- Más slides... -->
      </swiper-container> 
      </div>
      
      <div class="bottom-btn container">
        <div class="row g-3">
          <div class="col-12">
            <button (click)="selectUserType('partner')" class="btn btn-lg btn-primary w-100">
              Soy un Local Nocturno
            </button>
          </div>
          <div class="col-12">
            <button (click)="selectUserType('client')" class="btn btn-lg btn-secondary w-100">
              Soy un Cliente
            </button>
          </div>
        </div>
      </div>
      <div class="register-link"> 
        <p style="padding-top: 5px; text-align: center;">¿Tienes una cuenta? <a (click)="global.setRoute('login')" style="color: #f70192;">Inicia sesión</a></p>
      </div>
    </div>
  </div>
  
  <!-- Formulario para Partners (Locales Nocturnos) -->
  <ng-container *ngIf="userType === 'partner'">
    <!-- Paso 1: Credenciales -->
    <div class="page-content" *ngIf="currentStep === 1">
      <div class="container">
        <div class="account-area">
          <a (click)="userType = null; currentStep = 1" class="back-btn dz-flex-box">
            <i class="icon feather icon-chevron-left"></i>
          </a>
          <div class="section-head ps-0">
            <h3>Registro de Local Nocturno</h3>
            <p>Crea una cuenta para administrar tu local</p>
          </div>
          
          <form [formGroup]="partnerForm">
            <div class="mb-3">
              <label class="form-label">Email *</label>
              <input type="email" class="form-control" formControlName="email"
                    [class.is-invalid]="pf['email'].touched && pf['email'].invalid">
              <div *ngIf="pf['email'].touched && pf['email'].invalid" class="invalid-feedback">
                <span *ngIf="pf['email'].errors?.['required']">El correo es requerido</span>
                <span *ngIf="pf['email'].errors?.['email']">Ingresa un correo válido</span>
              </div>
            </div>
            
            <div class="mb-3">
              <label class="form-label">Contraseña *</label>
              <input type="password" class="form-control" formControlName="password"
                    [class.is-invalid]="pf['password'].touched && pf['password'].invalid">
              <div *ngIf="pf['password'].touched && pf['password'].invalid" class="invalid-feedback">
                <span *ngIf="pf['password'].errors?.['required']">La contraseña es requerida</span>
                <span *ngIf="pf['password'].errors?.['minlength']">Mínimo 8 caracteres</span>
              </div>
            </div>
            
            <div class="mb-3">
              <label class="form-label">Confirmar Contraseña *</label>
              <input type="password" class="form-control" formControlName="confirmPassword"
                    [class.is-invalid]="partnerForm.errors?.['mismatch']">
              <div *ngIf="partnerForm.errors?.['mismatch']" class="invalid-feedback">
                Las contraseñas no coinciden
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
    
    <!-- Paso 2: Información del Local -->
    <div class="page-content" *ngIf="currentStep === 2">
      <div class="container">
        <div class="account-area">
          <a (click)="prevStep()" class="back-btn dz-flex-box">
            <i class="icon feather icon-chevron-left"></i>
          </a>
          <div class="section-head ps-0">
            <h3>Información del Local</h3>
            <p>Datos básicos de tu establecimiento</p>
          </div>
          
          <form [formGroup]="partnerForm">
            <div class="mb-3">
              <label class="form-label">Nombre del Local *</label>
              <input type="text" class="form-control" formControlName="venueName"
                    [class.is-invalid]="pf['venueName'].touched && pf['venueName'].invalid">
              <div *ngIf="pf['venueName'].touched && pf['venueName'].invalid" class="invalid-feedback">
                Por favor ingresa el nombre de tu local
              </div>
            </div>
            
            <div class="mb-3">
              <label class="form-label">Dirección *</label>
              <input type="text" class="form-control" formControlName="address"
                    [class.is-invalid]="pf['address'].touched && pf['address'].invalid">
              <div *ngIf="pf['address'].touched && pf['address'].invalid" class="invalid-feedback">
                Por favor ingresa la dirección
              </div>
            </div>
            
            <div class="mb-3">
              <label class="form-label">Teléfono *</label>
              <input type="tel" class="form-control" formControlName="phone"
                    [class.is-invalid]="pf['phone'].touched && pf['phone'].invalid">
              <div *ngIf="pf['phone'].touched && pf['phone'].invalid" class="invalid-feedback">
                Por favor ingresa un número de teléfono válido
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
    
    <!-- Paso 3: Detalles Adicionales -->
    <div class="page-content" *ngIf="currentStep === 3">
      <div class="container">
        <div class="account-area">
          <a (click)="prevStep()" class="back-btn dz-flex-box">
            <i class="icon feather icon-chevron-left"></i>
          </a>
          <div class="section-head ps-0">
            <h3>Detalles Adicionales</h3>
            <p>Información adicional sobre tu local</p>
          </div>
          
          <form [formGroup]="partnerForm">
            <div class="mb-3">
              <label class="form-label">Descripción</label>
              <textarea class="form-control" formControlName="description" rows="3"></textarea>
            </div>
            
            <div class="mb-3">
              <label class="form-label">Capacidad</label>
              <input type="number" class="form-control" formControlName="capacity">
            </div>
            
            <div class="mb-3">
              <label class="form-label">Horario de Apertura</label>
              <input type="text" class="form-control" formControlName="openingHours" placeholder="Ej: 20:00 - 05:00">
            </div>
            
            <div class="form-check mt-4">
              <input class="form-check-input" type="checkbox" id="partnerTerms" formControlName="terms">
              <label class="form-check-label" for="partnerTerms">
                Acepto los términos y condiciones
              </label>
              <div *ngIf="pf['terms'].touched && pf['terms'].invalid" class="invalid-feedback">
                Debes aceptar los términos y condiciones
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </ng-container>
    
  <!-- Formulario para Clientes -->
  <ng-container *ngIf="userType === 'client'">
    <!-- Paso 1: Correo y Contraseña -->
    <div class="page-content" *ngIf="currentStep === 1">
      <div class="container">
        <div class="account-area">
          <a (click)="userType = null; currentStep = 1" class="back-btn dz-flex-box">
            <i class="icon feather icon-chevron-left"></i>
          </a>
          <div class="section-head ps-0">
            <h3>Por favor ingresa tu correo electrónico</h3>
          </div>
          
          <form [formGroup]="clientForm">
            <div class="mb-3">
              <label class="form-label">Correo Electrónico *</label>
              <input type="email" class="form-control" formControlName="email"
                    [class.is-invalid]="f['email'].touched && f['email'].invalid">
              <div *ngIf="f['email'].touched && f['email'].invalid" class="invalid-feedback">
                <span *ngIf="f['email'].errors?.['required']">El correo es requerido</span>
                <span *ngIf="f['email'].errors?.['email']">Ingresa un correo válido</span>
              </div>
            </div>
            
            <div class="mb-3">
              <label class="form-label">Contraseña *</label>
              <input type="password" class="form-control" formControlName="password"
                    [class.is-invalid]="f['password'].touched && f['password'].invalid">
              <div *ngIf="f['password'].touched && f['password'].invalid" class="invalid-feedback">
                <span *ngIf="f['password'].errors?.['required']">La contraseña es requerida</span>
                <span *ngIf="f['password'].errors?.['minlength']">Mínimo 8 caracteres</span>
              </div>
            </div>
            
            <div class="mb-3">
              <label class="form-label">Confirmar Contraseña *</label>
              <input type="password" class="form-control" formControlName="confirmPassword"
                    [class.is-invalid]="clientForm.errors?.['mismatch']">
              <div *ngIf="clientForm.errors?.['mismatch']" class="invalid-feedback">
                Las contraseñas no coinciden
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
    
    <!-- Paso 2: Información Personal -->
    <div class="page-content" *ngIf="currentStep === 2">
      <div class="container">
        <div class="account-area">
          <a (click)="prevStep()" class="back-btn dz-flex-box">
            <i class="icon feather icon-chevron-left"></i>
          </a>
          <div class="section-head ps-0">
            <h3>Información Personal</h3>
          </div>
          
          <form [formGroup]="clientForm">
            <div class="mb-3">
              <label class="form-label">Nombre *</label>
              <input type="text" class="form-control" formControlName="firstName"
                    [class.is-invalid]="f['firstName'].touched && f['firstName'].invalid">
              <div *ngIf="f['firstName'].touched && f['firstName'].invalid" class="invalid-feedback">
                Por favor ingresa tu nombre
              </div>
            </div>
            
            <div class="mb-3">
              <label class="form-label">Fecha de Nacimiento *</label>
              <input type="date" class="form-control" formControlName="birthDate"
                    [class.is-invalid]="f['birthDate'].touched && f['birthDate'].invalid">
              <div *ngIf="f['birthDate'].touched && f['birthDate'].invalid" class="invalid-feedback">
                Por favor ingresa tu fecha de nacimiento
              </div>
            </div>
            
            <div class="mb-3">
              <label class="form-label">Género *</label>
              <select class="form-control" formControlName="gender"
                      [class.is-invalid]="f['gender'].touched && f['gender'].invalid">
                <option value="Women">Mujer</option>
                <option value="Men">Hombre</option>
                <option value="Other">Otro</option>
              </select>
            </div>
          </form>
        </div>
      </div>
    </div>
    
    <!-- Paso 3: Preferencias -->
    <div class="page-content" *ngIf="currentStep === 3">
      <div class="container">
        <div class="account-area">
          <a (click)="prevStep()" class="back-btn dz-flex-box">
            <i class="icon feather icon-chevron-left"></i>
          </a>
          <div class="section-head ps-0">
            <h3>Tus Preferencias</h3>
          </div>
          
          <form [formGroup]="clientForm">
            <div class="mb-4">
                <label class="form-label">Orientación Sexual</label>
                
                <!-- Usar formGroupName para agrupar los checkboxes -->
                <div formGroupName="orientation">
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" formControlName="straight" id="straight">
                    <label class="form-check-label" for="straight">Straight</label>
                  </div>
                  
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" formControlName="gay" id="gay">
                    <label class="form-check-label" for="gay">Gay</label>
                  </div>
                  
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" formControlName="lesbian" id="lesbian">
                    <label class="form-check-label" for="lesbian">Lesbian</label>
                  </div>
                  
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" formControlName="bisexual" id="bisexual">
                    <label class="form-check-label" for="bisexual">Bisexual</label>
                  </div>
                  
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" formControlName="asexual" id="asexual">
                    <label class="form-check-label" for="asexual">Asexual</label>
                  </div>
                  
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" formControlName="queer" id="queer">
                    <label class="form-check-label" for="queer">Queer</label>
                  </div>
                  
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" formControlName="demisexual" id="demisexual">
                    <label class="form-check-label" for="demisexual">Demisexual</label>
                  </div>
                </div>
              </div>
            
            <div class="mb-4">
              <label class="form-label">Interesado en *</label>
              <select class="form-control" formControlName="interestedIn">
                <option value="Women">Mujeres</option>
                <option value="Men">Hombres</option>
                <option value="Other">Otros</option>
              </select>
            </div>
            
            <div class="mb-4">
              <label class="form-label">Qué buscas *</label>
              <select class="form-control" formControlName="lookingFor">
                <option value="Long-term partner">Relación seria</option>
                <option value="Short-term fun">Diversión a corto plazo</option>
                <option value="New friends">Nuevas amistades</option>
              </select>
            </div>
          </form>
        </div>
      </div>
    </div>
    
    <!-- Paso 4: Fotos -->
     <!-- Paso 4: Fotos -->
<div class="page-content p-b70" *ngIf="currentStep === 4">
    <div class="container">
      <div class="account-area">
        <a (click)="prevStep()" class="back-btn dz-flex-box">
          <i class="icon feather icon-chevron-left"></i>
        </a>
        <div class="section-head ps-0">
          <h3>Agrega tus fotos</h3>
          <p>Sube al menos 2 fotos para tu perfil</p>
        </div>
        
        <!-- Envuelve todo en el formulario -->
        <form [formGroup]="clientForm">
          <div class="row g-3">
            <div class="col-8">
              <div class="dz-drop-box">
                <div class="drop-bx bx-lg">
                  <div class="imagePreview" [style.background-image]="'url(' + (photosArray.value[0] || '../assets/images/recent-pic/drop-bx.png') + ')'">
                    <div class="remove-img remove-btn" *ngIf="photosArray.value[0]" (click)="photosArray.at(0).setValue(null)">
                      <i class="icon feather icon-x"></i>
                    </div>
                    <input type='file' class="form-control d-none imageUpload" id="imageUpload1" 
                          accept=".png, .jpg, .jpeg" (change)="handleFileInput($event, 0)">
                    <label for="imageUpload1"></label>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="col-4" *ngFor="let index of [1, 2]; let i = index">
              <div class="dz-drop-box">
                <div class="drop-bx">
                  <div class="imagePreview" [style.background-image]="'url(' + (photosArray.value[index] || '../assets/images/recent-pic/drop-bx.png') + ')'">
                    <div class="remove-img remove-btn" *ngIf="photosArray.value[index]" (click)="photosArray.at(index).setValue(null)">
                      <i class="icon feather icon-x"></i>
                    </div>
                    <input type='file' class="form-control d-none imageUpload" [id]="'imageUpload' + (index + 1)" 
                          accept=".png, .jpg, .jpeg" (change)="handleFileInput($event, index)">
                    <label [for]="'imageUpload' + (index + 1)"></label>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="col-4" *ngFor="let index of [3, 4, 5]; let i = index">
              <div class="dz-drop-box">
                <div class="drop-bx">
                  <div class="imagePreview" [style.background-image]="'url(' + (photosArray.value[index] || '../assets/images/recent-pic/drop-bx.png') + ')'">
                    <div class="remove-img remove-btn" *ngIf="photosArray.value[index]" (click)="photosArray.at(index).setValue(null)">
                      <i class="icon feather icon-x"></i>
                    </div>
                    <input type='file' class="form-control d-none imageUpload" [id]="'imageUpload' + (index + 1)" 
                          accept=".png, .jpg, .jpeg" (change)="handleFileInput($event, index)">
                    <label [for]="'imageUpload' + (index + 1)"></label>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <div class="form-check mt-4">
            <input class="form-check-input" type="checkbox" id="terms" formControlName="terms">
            <label class="form-check-label" for="terms">
              Acepto los términos y condiciones
            </label>
            <div *ngIf="f['terms'].touched && f['terms'].invalid" class="invalid-feedback">
              Debes aceptar los términos y condiciones
            </div>
          </div>
        </form> <!-- Cierre del formulario -->
      </div>
    </div>
  </div> 
  </ng-container>
  
  <!-- Footer de navegación -->
  <div class="footer fixed bg-transparent" *ngIf="userType && currentStep < (userType === 'partner' ? 3 : 4)">
    <div class="container">
      <div class="row g-2">
        <div class="col-6" *ngIf="currentStep > 1">
          <button (click)="prevStep()" class="btn btn-outline-secondary w-100">
            Anterior
          </button>
        </div>
        <div class="col-6" [class.offset-6]="currentStep === 1">
          <button (click)="nextStep()" class="btn btn-primary w-100">
            Siguiente
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer para enviar -->
  <div class="footer fixed bg-white" *ngIf="userType && currentStep === (userType === 'partner' ? 3 : 4)">
    <div class="container">
      <ng-container *ngIf="userType === 'partner'">
        <button (click)="onSubmit()" class="btn btn-success w-100" 
                [disabled]="!partnerForm.get('terms')?.value || partnerForm.invalid">
          {{ !partnerForm.get('terms')?.value ? 'Acepta los términos' : 
             partnerForm.invalid ? 'Completa todos los campos requeridos' : 
             'Completar Registro' }}
        </button>
      </ng-container>
      
      <ng-container *ngIf="userType === 'client'">
        <button (click)="onSubmit()" class="btn btn-success w-100" 
                [disabled]="!clientForm.get('terms')?.value || clientForm.invalid">
          Completar Registro
        </button>
      </ng-container>
    </div>
  </div>
  
 